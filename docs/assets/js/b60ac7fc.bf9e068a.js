"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[8617],{2670:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>A,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"Features/user-blocking","title":"User Blocking System","description":"The user blocking feature allows users to prevent unwanted communication by blocking specific users. This document explains how the blocking system is implemented in the chat application.","source":"@site/docs-source/Features/user-blocking.md","sourceDirName":"Features","slug":"/Features/user-blocking","permalink":"/CustomChatApp/docs/Features/user-blocking","draft":false,"unlisted":false,"editUrl":"https://github.com/Emir2099/CustomChatApp/docs-source/Features/user-blocking.md","tags":[],"version":"current","lastUpdatedAt":1747596735000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Message Status Features","permalink":"/CustomChatApp/docs/Features/message-status"},"next":{"title":"Admin Features & Message Logs","permalink":"/CustomChatApp/docs/Features/admin-logs"}}');var i=n(4848),t=n(8453);const o={sidebar_position:4},l="User Blocking System",c={},a=[{value:"Overview",id:"overview",level:2},{value:"User Interface",id:"user-interface",level:2},{value:"Direct Message Panel",id:"direct-message-panel",level:3},{value:"Chat Area",id:"chat-area",level:3},{value:"Implementation",id:"implementation",level:2},{value:"Database Structure",id:"database-structure",level:3},{value:"Core Functions",id:"core-functions",level:3},{value:"1. Block User",id:"1-block-user",level:4},{value:"2. Unblock User",id:"2-unblock-user",level:4},{value:"3. Check If User Is Blocked",id:"3-check-if-user-is-blocked",level:4},{value:"Message Sending Prevention",id:"message-sending-prevention",level:3},{value:"User Experience Considerations",id:"user-experience-considerations",level:2},{value:"Integration with Other Features",id:"integration-with-other-features",level:2},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Customization Options",id:"customization-options",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"user-blocking-system",children:"User Blocking System"})}),"\n",(0,i.jsx)(s.p,{children:"The user blocking feature allows users to prevent unwanted communication by blocking specific users. This document explains how the blocking system is implemented in the chat application."}),"\n",(0,i.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(s.p,{children:"When a user blocks another user:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"The blocked user can no longer send messages to the blocker"}),"\n",(0,i.jsx)(s.li,{children:'The blocker will see a "blocked" indicator in the UI'}),"\n",(0,i.jsx)(s.li,{children:"Messages from blocked users are hidden (optional configuration)"}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"user-interface",children:"User Interface"}),"\n",(0,i.jsx)(s.p,{children:"The blocking feature is accessible from two main locations:"}),"\n",(0,i.jsx)(s.h3,{id:"direct-message-panel",children:"Direct Message Panel"}),"\n",(0,i.jsx)(s.p,{children:"In the direct message panel (right sidebar), users can find the block/unblock button:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"Block Button UI",src:n(8026).A+"",width:"500",height:"300"})}),"\n",(0,i.jsx)(s.p,{children:"The UI changes based on the current blocking state:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:'For unblocked users: Shows a "Block User" button'}),"\n",(0,i.jsx)(s.li,{children:'For blocked users: Shows "You\'ve blocked this user" banner and an "Unblock User" button'}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"chat-area",children:"Chat Area"}),"\n",(0,i.jsx)(s.p,{children:"The chat area displays a banner when viewing a conversation with a blocked user:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"Blocked Banner",src:n(2822).A+"",width:"800",height:"300"})}),"\n",(0,i.jsx)(s.p,{children:'The message input area is disabled when viewing a chat with a blocked user, with a message indicating "You can\'t send messages to blocked users".'}),"\n",(0,i.jsx)(s.h2,{id:"implementation",children:"Implementation"}),"\n",(0,i.jsx)(s.h3,{id:"database-structure",children:"Database Structure"}),"\n",(0,i.jsx)(s.p,{children:"Blocked users are stored in the Firebase Realtime Database under the user's profile:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"/users/{userId}/blockedUsers/{blockedUserId}: true\n"})}),"\n",(0,i.jsx)(s.p,{children:"This structure allows for quick lookups to check if a user is blocked."}),"\n",(0,i.jsx)(s.h3,{id:"core-functions",children:"Core Functions"}),"\n",(0,i.jsxs)(s.p,{children:["The blocking functionality is implemented in the ",(0,i.jsx)(s.code,{children:"ChatContext.jsx"})," file with three main functions:"]}),"\n",(0,i.jsx)(s.h4,{id:"1-block-user",children:"1. Block User"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-jsx",children:"// Function to block a user\nconst blockUser = useCallback(async (userIdToBlock) => {\n  if (!user?.uid || !userIdToBlock) return;\n\n  try {\n    // Add the user to the blocked list\n    const updates = {};\n    updates[`users/${user.uid}/blockedUsers/${userIdToBlock}`] = true;\n    await update(ref(db), updates);\n    \n    // Update local state\n    console.log(`User ${userIdToBlock} has been blocked`);\n    \n    return true;\n  } catch (error) {\n    console.error('Error blocking user:', error);\n    throw error;\n  }\n}, [user]);\n"})}),"\n",(0,i.jsx)(s.h4,{id:"2-unblock-user",children:"2. Unblock User"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-jsx",children:"// Function to unblock a user\nconst unblockUser = useCallback(async (userIdToUnblock) => {\n  if (!user?.uid || !userIdToUnblock) return;\n\n  try {\n    // Remove the user from the blocked list\n    const updates = {};\n    updates[`users/${user.uid}/blockedUsers/${userIdToUnblock}`] = null;\n    await update(ref(db), updates);\n    \n    // Update local state\n    console.log(`User ${userIdToUnblock} has been unblocked`);\n    \n    return true;\n  } catch (error) {\n    console.error('Error unblocking user:', error);\n    throw error;\n  }\n}, [user]);\n"})}),"\n",(0,i.jsx)(s.h4,{id:"3-check-if-user-is-blocked",children:"3. Check If User Is Blocked"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-jsx",children:"// Function to check if a user is blocked\nconst isUserBlocked = useCallback((userId) => {\n  if (!user?.uid || !userId || !allUsers?.[user.uid]?.blockedUsers) return false;\n  \n  // Check if userId is in current user's blocked list\n  return !!allUsers[user.uid]?.blockedUsers?.[userId];\n}, [user, allUsers]);\n"})}),"\n",(0,i.jsx)(s.h3,{id:"message-sending-prevention",children:"Message Sending Prevention"}),"\n",(0,i.jsx)(s.p,{children:"The application prevents messages from being sent to users who have blocked the sender by checking the blocking status before allowing message transmission:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-jsx",children:"// In the sendMessage function\nif (currentChat.type === 'private') {\n  // Find the other user's ID\n  let otherUserId = null;\n  \n  if (currentChat.participants) {\n    otherUserId = Object.keys(currentChat.participants).find(id => id !== user.uid);\n  } else if (currentChat.members) {\n    otherUserId = Object.keys(currentChat.members).find(id => id !== user.uid);\n  }\n  \n  if (otherUserId) {\n    // Check if the recipient has blocked the sender\n    const otherUserRef = ref(db, `users/${otherUserId}/blockedUsers/${user.uid}`);\n    const blockedSnapshot = await get(otherUserRef);\n    \n    if (blockedSnapshot.exists() && blockedSnapshot.val() === true) {\n      // If the recipient has blocked the sender, don't allow sending the message\n      console.log(\"Cannot send message: recipient has blocked you\");\n      return;\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(s.p,{children:"Similar checks are implemented for file messages and voice messages."}),"\n",(0,i.jsx)(s.h2,{id:"user-experience-considerations",children:"User Experience Considerations"}),"\n",(0,i.jsx)(s.p,{children:"The blocking system is designed with these UX principles:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Clear Feedback"}),": Users receive immediate feedback when blocking/unblocking"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Reversible Actions"}),": Blocking can always be undone by unblocking"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Privacy"}),": Users are not notified when they are blocked"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Transparency"}),": Blocked users see a clear error message if they try to send messages"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"integration-with-other-features",children:"Integration with Other Features"}),"\n",(0,i.jsx)(s.p,{children:"The blocking system integrates with:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Message Display"}),": Optionally filtering out messages from blocked users"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"User Search"}),": Preventing blocked users from appearing in search results"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Group Chats"}),": Still allowing blocked users to interact in shared group contexts"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Notifications"}),": Preventing notifications from blocked users"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,i.jsx)(s.p,{children:"The blocking system includes these security measures:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Database Rules"}),": Firebase security rules prevent unauthorized access to blocking data"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Client-Side Validation"}),": UI prevents attempts to send messages to blocking users"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Server-Side Validation"}),": Database rules validate blocking status during message sending"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"customization-options",children:"Customization Options"}),"\n",(0,i.jsx)(s.p,{children:"The blocking system can be customized by:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Modifying the UI"}),": Changing the appearance of blocking indicators"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Adjusting Behavior"}),": Configuring whether to hide or show messages from blocked users"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Extending Functionality"}),": Adding block reporting or abuse notification features"]}),"\n"]})]})}function A(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},2822:(e,s,n)=>{n.d(s,{A:()=>r});const r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAEsBAMAAADJA8oJAAAAIVBMVEVHcEz+8PL97/Hw8PL////6ucL8ztT3gZb4m6v94eT2bIW3AhDUAAAAAXRSTlMAQObYZgAABFRJREFUeNrt2MFuqlgAgOG+wiGRK0tNpHU9rzAvYBOgsoMEKuxqQjm4q0kLZYeJeHUP0j7lHGynmTu5M3MXk1xz+3+JRA8HTPhF0IsLAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/Ip+x1m5+A1n5WKMs3IhcFYIQhAQhCAgCEFAkM8TxLixKw7G+QQZO+nqnoNxPkEG3WZaev2Zcm34/YD+dr4YkdC905PTqAjVox5p0bf7qEf1SC3F+3g/SZj/dMLV/34mvr/RZw8Srzztatkfj2a47geGs9O4/iKGd6di2em1FPrMrYy/nUxu5aqjnAsjeZ8kxvbB+1gdfDP5Lyu+R88IouRXrdDb/plzG1mbUA9sLzTtkd7Yw7vtXAuCTL00LCl2jWvt59u52E7VcmKb1kjElbsN/DzYJ7pVbW05qSZdbPmmWjm3RsbKD+bCsDaBH1qjwPUMex5U27larSaMA2ts+cG12NrjIDTVvtWkTx9EK7TSe/t87+RtnskvD8O1dHJP78rFvUy3nZXcO/lCdn2QPGvyRxHXbfqU54fmFOQg2zLPErVt/ijzPohs1QbdsZwZK0t2o0sZyGRV2t3KG3Sr8llKt4iLr/2AWtE9i0UZdK/b8vFlVc4IUohB8xZk8JJPG/llrbeJOph6e1nI5cGZDV7nx7L0pBgs46Bt8vkpiH0snYfTV9Zh3pRmm0i9a7VVpr751EBaFsv88kGoh1tdJTvZyctiGXuDF3ebdKX7FD+ZrhqIZdf5YqJ25dRO8iKHD3xl5SPNtdv3IPtGXq6N9Pl4U+nt4UZmB/d68vp8tNxrKYZLt26bbSfisN02R2u33oj4Oj/Mk1MQs2nHq6QPEjWptbgrrlSQnQoydZ3EVkGyPkisglh1WpeOCuLGib14EbnrrPPbvA+SbT59kMNMTI7rtyC7NHPLtXBnTlHpx/RrlqaTo3XfOMXXrlP3Y32QohG7tC2avNjZmbg6Nn2Q8jm5TZ/LR+l6WupGzW2xuMtVENc6JqOr0pJP8vLpuPJ0FSRLHxfpInVLNRDIpzwTZWl1q/gU5HH56YNMmo35+n5/a4SVGVbqXlZd1I0wMrw60oK9ry7q0zASWlhPoyjwxdRWS3VZ3vvCUE82UR1uIsMemVFkVuO63kRqA28/VXvy1XRTXbP9SK/CsDL8eurV8zqqIzPcBOUmiAI1K9wHqRlGfmRE/qcPojnHH/xhqP3YrI8bpf+6YzJk8+cUPW35Xfjx10lg/5ybzXH4cToY4YYeH38uaj/p/TUSfD8ICAKCEAQEIQj+1yAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4Ff0BXt/380ZtTKoAAAAASUVORK5CYII="},8026:(e,s,n)=>{n.d(s,{A:()=>r});const r="data:image/png;base64,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"},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var r=n(6540);const i={},t=r.createContext(i);function o(e){const s=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);